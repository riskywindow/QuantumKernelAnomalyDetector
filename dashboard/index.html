<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Kernel Anomaly Detection</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdn.plot.ly/plotly-2.35.0.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="data_bundle.js"></script>
<style>
  :root {
    --bg-primary: #0d1117;
    --bg-secondary: #161b22;
    --bg-tertiary: #21262d;
    --border: #30363d;
    --text-primary: #e6edf3;
    --text-secondary: #8b949e;
    --text-muted: #6e7681;
    --accent-quantum: #58a6ff;
    --accent-quantum-light: #79c0ff;
    --accent-quantum-dim: #1f6feb;
    --accent-classical: #f0883e;
    --accent-classical-light: #ffa657;
    --accent-baseline: #8b949e;
    --accent-green: #3fb950;
    --accent-red: #f85149;
    --accent-purple: #bc8cff;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
  }

  .app-header {
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
    padding: 20px 32px;
  }

  .app-header h1 {
    font-size: 22px;
    font-weight: 600;
    letter-spacing: -0.3px;
  }

  .app-header .subtitle {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 4px;
  }

  .tab-bar {
    display: flex;
    gap: 0;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
    padding: 0 32px;
    overflow-x: auto;
  }

  .tab-btn {
    padding: 10px 20px;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: color 0.15s, border-color 0.15s;
  }

  .tab-btn:hover { color: var(--text-primary); }
  .tab-btn.active {
    color: var(--accent-quantum);
    border-bottom-color: var(--accent-quantum);
  }

  .tab-content {
    padding: 24px 32px;
    max-width: 1400px;
    margin: 0 auto;
  }

  .card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 16px;
  }

  .card h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--text-primary);
  }

  .metrics-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 20px;
  }

  .metric-card {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    text-align: center;
  }

  .metric-card .value {
    font-size: 28px;
    font-weight: 700;
    color: var(--accent-quantum);
    letter-spacing: -1px;
  }

  .metric-card .label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 4px;
    font-weight: 500;
  }

  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
  .grid-2x3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

  .results-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  .results-table th {
    text-align: left;
    padding: 10px 12px;
    border-bottom: 2px solid var(--border);
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    cursor: pointer;
    user-select: none;
  }

  .results-table th:hover { color: var(--text-primary); }

  .results-table td {
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
  }

  .results-table tr:hover td { background: var(--bg-tertiary); }

  .type-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
  }

  .type-badge.quantum { background: rgba(88,166,255,0.15); color: var(--accent-quantum); }
  .type-badge.quantum_kpca { background: rgba(121,192,255,0.15); color: var(--accent-quantum-light); }
  .type-badge.classical { background: rgba(240,136,62,0.15); color: var(--accent-classical); }
  .type-badge.classical_kpca { background: rgba(255,166,87,0.15); color: var(--accent-classical-light); }
  .type-badge.baseline { background: rgba(139,148,158,0.15); color: var(--accent-baseline); }

  .highlight-row td { background: rgba(88,166,255,0.05); }

  .text-panel {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.7;
  }

  .text-panel p { margin-bottom: 10px; }
  .text-panel strong { color: var(--text-primary); }

  .pipeline-diagram {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 20px;
    flex-wrap: wrap;
  }

  .pipeline-step {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px 16px;
    font-size: 12px;
    font-weight: 500;
    text-align: center;
    min-width: 100px;
  }

  .pipeline-step.quantum {
    border-color: var(--accent-quantum-dim);
    color: var(--accent-quantum);
  }

  .pipeline-arrow {
    color: var(--text-muted);
    font-size: 18px;
  }

  .zne-summary {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .zne-stat {
    text-align: center;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: 6px;
  }

  .zne-stat .val {
    font-size: 24px;
    font-weight: 700;
    color: var(--accent-green);
  }

  .zne-stat .lbl {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 2px;
  }

  .plot-container { width: 100%; min-height: 350px; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

const TABS = [
  "Overview",
  "Kernel Comparison",
  "Benchmark Results",
  "Expressibility",
  "Quantum Advantage",
  "Hardware & Noise",
];

const PLOTLY_LAYOUT_BASE = {
  paper_bgcolor: '#161b22',
  plot_bgcolor: '#0d1117',
  font: { color: '#e6edf3', size: 12 },
  margin: { t: 40, r: 20, b: 50, l: 60 },
  xaxis: { gridcolor: '#21262d', zerolinecolor: '#30363d' },
  yaxis: { gridcolor: '#21262d', zerolinecolor: '#30363d' },
};

const PLOTLY_CONFIG = { displayModeBar: false, responsive: true };

function Plot({ data, layout, style }) {
  const ref = useRef(null);
  useEffect(() => {
    if (ref.current) {
      const merged = { ...PLOTLY_LAYOUT_BASE, ...layout };
      Plotly.newPlot(ref.current, data, merged, PLOTLY_CONFIG);
    }
    return () => { if (ref.current) Plotly.purge(ref.current); };
  }, [data, layout]);
  return React.createElement('div', { ref, style: { width: '100%', ...style } });
}

// ─── Tab 1: Overview ───
function OverviewTab() {
  const metrics = [
    { value: '317', label: 'Tests Passing' },
    { value: '4', label: 'Quantum Feature Maps' },
    { value: '0.90', label: 'Best Quantum AUROC' },
    { value: '38%', label: 'ZNE Fidelity Recovery' },
  ];

  return React.createElement('div', null,
    React.createElement('div', { className: 'metrics-row' },
      metrics.map((m, i) =>
        React.createElement('div', { className: 'metric-card', key: i },
          React.createElement('div', { className: 'value' }, m.value),
          React.createElement('div', { className: 'label' }, m.label),
        )
      )
    ),
    React.createElement('div', { className: 'card' },
      React.createElement('h3', null, 'Project Summary'),
      React.createElement('div', { className: 'text-panel' },
        React.createElement('p', null,
          'A hybrid quantum-classical anomaly detection system that encodes financial transaction data into quantum states via parameterized circuits, computes kernel matrices measuring quantum state overlap, and feeds them into classical ML models for fraud detection. The project rigorously benchmarks 4 quantum feature maps against classical baselines, proves quantum advantage exists on synthetic data, and characterizes noise tolerance on IBM Quantum hardware.'
        ),
        React.createElement('p', null,
          React.createElement('strong', null, 'Key finding: '),
          'Hardware-Efficient quantum kernel achieves the best F1 score (0.76) across all 15 models tested, while expressibility analysis reveals that higher quantum expressibility actually hurts performance on real data \u2014 a counterintuitive result with implications for quantum ML algorithm design.'
        ),
      )
    ),
    React.createElement('div', { className: 'card' },
      React.createElement('h3', null, 'Architecture'),
      React.createElement('div', { className: 'pipeline-diagram' },
        React.createElement('div', { className: 'pipeline-step' }, 'Credit Card', React.createElement('br'), 'Data (284K txns)'),
        React.createElement('span', { className: 'pipeline-arrow' }, '\u2192'),
        React.createElement('div', { className: 'pipeline-step' }, 'StandardScale', React.createElement('br'), '+ PCA (5d)'),
        React.createElement('span', { className: 'pipeline-arrow' }, '\u2192'),
        React.createElement('div', { className: 'pipeline-step quantum' }, 'Quantum', React.createElement('br'), 'Feature Map'),
        React.createElement('span', { className: 'pipeline-arrow' }, '\u2192'),
        React.createElement('div', { className: 'pipeline-step quantum' }, 'Kernel Matrix', React.createElement('br'), 'K[i,j] = |\u27E8\u03C8(x\u1D62)|\u03C8(x\u2C7C)\u27E9|\u00B2'),
        React.createElement('span', { className: 'pipeline-arrow' }, '\u2192'),
        React.createElement('div', { className: 'pipeline-step' }, 'One-Class SVM', React.createElement('br'), '/ Kernel PCA'),
        React.createElement('span', { className: 'pipeline-arrow' }, '\u2192'),
        React.createElement('div', { className: 'pipeline-step' }, 'Anomaly', React.createElement('br'), 'Scores'),
      )
    )
  );
}

// ─── Tab 2: Kernel Comparison ───
function KernelComparisonTab() {
  if (!KERNEL_MATRICES) return React.createElement('div', null, 'No kernel matrix data available.');

  const kernelNames = Object.keys(KERNEL_MATRICES.kernels);
  const colorscale = [
    [0, '#0d1117'], [0.05, '#161b40'], [0.1, '#1a2260'],
    [0.2, '#1f3d8a'], [0.4, '#2563b0'], [0.6, '#4c90d0'],
    [0.8, '#79c0ff'], [1, '#ffffff']
  ];

  // Heatmaps
  const heatmaps = kernelNames.map((name) => {
    const K = KERNEL_MATRICES.kernels[name];
    return {
      data: [{
        z: K.matrix,
        type: 'heatmap',
        colorscale: colorscale,
        zmin: 0, zmax: 1,
        showscale: false,
        hovertemplate: 'Row %{y}, Col %{x}<br>K = %{z:.4f}<extra></extra>',
      }],
      layout: {
        ...PLOTLY_LAYOUT_BASE,
        title: { text: name, font: { size: 14, color: '#e6edf3' } },
        margin: { t: 40, r: 10, b: 30, l: 30 },
        xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: '' },
        yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: '', autorange: 'reversed' },
        height: 280,
      }
    };
  });

  // Stats bar chart
  const statNames = kernelNames;
  const meanOffDiag = statNames.map(n => KERNEL_MATRICES.kernels[n].stats.mean_off_diag);
  const colors = statNames.map(n =>
    ['ZZ','IQP','Covariant','HW-Efficient'].includes(n) ? '#58a6ff' : '#f0883e'
  );

  const statsData = [{
    x: statNames,
    y: meanOffDiag,
    type: 'bar',
    marker: { color: colors },
    hovertemplate: '%{x}: %{y:.4f}<extra></extra>',
  }];

  const statsLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Mean Off-Diagonal Value', font: { size: 14, color: '#e6edf3' } },
    height: 280,
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Mean K[i,j] (i\u2260j)' },
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: '' },
  };

  return React.createElement('div', null,
    React.createElement('div', { className: 'card' },
      React.createElement('h3', null, 'Kernel Matrix Heatmaps (20\u00D720 samples, 5 qubits)'),
      React.createElement('div', { className: 'grid-2x3' },
        heatmaps.map((h, i) =>
          React.createElement(Plot, { key: i, data: h.data, layout: h.layout })
        )
      )
    ),
    React.createElement('div', { className: 'card' },
      React.createElement(Plot, { data: statsData, layout: statsLayout })
    )
  );
}

// ─── Tab 3: Benchmark Results ───
function BenchmarkTab() {
  const [sortCol, setSortCol] = useState('auroc');
  const [sortAsc, setSortAsc] = useState(false);

  if (!BENCHMARK_DATA) return React.createElement('div', null, 'No benchmark data available.');

  const models = [...BENCHMARK_DATA.models].sort((a, b) =>
    sortAsc ? a[sortCol] - b[sortCol] : b[sortCol] - a[sortCol]
  );

  const typeColors = {
    quantum: '#58a6ff',
    quantum_kpca: '#79c0ff',
    classical: '#f0883e',
    classical_kpca: '#ffa657',
    baseline: '#8b949e',
  };

  // Grouped bar chart
  const metricNames = ['AUROC', 'AUPRC', 'F1'];
  const metricKeys = ['auroc', 'auprc', 'f1'];
  const metricColors = ['#58a6ff', '#bc8cff', '#3fb950'];

  const sorted = [...BENCHMARK_DATA.models].sort((a, b) => b.auroc - a.auroc);

  const barData = metricKeys.map((key, i) => ({
    x: sorted.map(m => m.name),
    y: sorted.map(m => m[key]),
    type: 'bar',
    name: metricNames[i],
    marker: { color: metricColors[i] },
    hovertemplate: '%{x}<br>' + metricNames[i] + ': %{y:.4f}<extra></extra>',
  }));

  const barLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Model Performance Comparison', font: { size: 14, color: '#e6edf3' } },
    barmode: 'group',
    height: 380,
    legend: { orientation: 'h', y: 1.12, font: { size: 11 } },
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, tickangle: -35, tickfont: { size: 10 } },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Score', range: [0, 1] },
    margin: { t: 60, r: 20, b: 120, l: 60 },
  };

  const handleSort = (col) => {
    if (sortCol === col) setSortAsc(!sortAsc);
    else { setSortCol(col); setSortAsc(false); }
  };

  const cols = [
    ['name', 'Model'], ['auroc', 'AUROC'], ['auprc', 'AUPRC'],
    ['f1', 'F1'], ['precision', 'Precision'], ['recall', 'Recall'],
  ];

  return React.createElement('div', null,
    React.createElement('div', { className: 'card' },
      React.createElement(Plot, { data: barData, layout: barLayout })
    ),
    React.createElement('div', { className: 'card' },
      React.createElement('h3', null, 'Full Results Table'),
      React.createElement('table', { className: 'results-table' },
        React.createElement('thead', null,
          React.createElement('tr', null,
            cols.map(([key, label]) =>
              React.createElement('th', {
                key, onClick: () => key !== 'name' && handleSort(key),
                style: key === 'name' ? { cursor: 'default' } : {},
              }, label, sortCol === key ? (sortAsc ? ' \u25B2' : ' \u25BC') : '')
            ),
            React.createElement('th', null, 'Type'),
          )
        ),
        React.createElement('tbody', null,
          models.map((m, i) =>
            React.createElement('tr', {
              key: i,
              className: m.name === 'OCSVM (HW-Efficient)' ? 'highlight-row' : '',
            },
              React.createElement('td', { style: { fontWeight: 500 } }, m.name),
              React.createElement('td', null, m.auroc.toFixed(4)),
              React.createElement('td', null, m.auprc.toFixed(4)),
              React.createElement('td', { style: m.name === 'OCSVM (HW-Efficient)' ? { fontWeight: 700, color: '#3fb950' } : {} },
                m.f1.toFixed(4)),
              React.createElement('td', null, m.precision.toFixed(4)),
              React.createElement('td', null, m.recall.toFixed(4)),
              React.createElement('td', null,
                React.createElement('span', { className: `type-badge ${m.kernel_type}` },
                  m.kernel_type.replace('_', ' ')
                )
              ),
            )
          )
        )
      )
    )
  );
}

// ─── Tab 4: Expressibility ───
function ExpressibilityTab() {
  if (!EXPRESSIBILITY_DATA) return React.createElement('div', null, 'No expressibility data available.');

  const { eigenspectra, metrics, geometric_differences } = EXPRESSIBILITY_DATA;

  // Eigenspectrum plot
  const kernelColors = {
    'ZZ': '#58a6ff', 'IQP': '#bc8cff', 'Covariant': '#3fb950',
    'HW-Efficient': '#f0883e', 'RBF': '#f85149',
  };

  const eigenData = Object.entries(eigenspectra).map(([name, spec]) => ({
    x: spec.normalized.map((_, i) => i + 1),
    y: spec.normalized,
    type: 'scatter',
    mode: 'lines+markers',
    name: name,
    marker: { size: 5, color: kernelColors[name] },
    line: { color: kernelColors[name], width: 2 },
  }));

  const eigenLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Normalized Eigenspectrum', font: { size: 14, color: '#e6edf3' } },
    height: 350,
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: 'Eigenvalue Index', dtick: 2 },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Normalized Eigenvalue', type: 'log' },
    legend: { font: { size: 11 } },
  };

  // KTA vs AUROC scatter
  const phaseAuroc = { 'ZZ': 0.8744, 'IQP': 0.8178, 'Covariant': 0.8756, 'HW-Efficient': 0.8978, 'RBF': 0.9078 };

  const scatterData = [{
    x: Object.keys(metrics).map(n => metrics[n].effective_dimension),
    y: Object.keys(metrics).map(n => phaseAuroc[n]),
    text: Object.keys(metrics),
    type: 'scatter',
    mode: 'markers+text',
    textposition: 'top center',
    textfont: { size: 11, color: '#e6edf3' },
    marker: {
      size: 12,
      color: Object.keys(metrics).map(n => kernelColors[n]),
    },
    hovertemplate: '%{text}<br>Eff. Dim: %{x:.1f}<br>AUROC: %{y:.4f}<extra></extra>',
  }];

  const scatterLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Effective Dimension vs AUROC (r = -0.835)', font: { size: 14, color: '#e6edf3' } },
    height: 350,
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: 'Effective Dimension' },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'AUROC (Phase 3)', range: [0.8, 0.92] },
    showlegend: false,
  };

  // Geometric difference display
  const geoNames = Object.keys(geometric_differences);
  const gData = [{
    x: geoNames.map(n => n.replace('_vs_RBF', '')),
    y: geoNames.map(n => geometric_differences[n].g_c_over_q),
    type: 'bar',
    name: 'g(RBF, Q) \u2014 Classical captures more',
    marker: { color: '#f0883e' },
  }, {
    x: geoNames.map(n => n.replace('_vs_RBF', '')),
    y: geoNames.map(n => geometric_differences[n].g_q_over_c),
    type: 'bar',
    name: 'g(Q, RBF) \u2014 Quantum captures more',
    marker: { color: '#58a6ff' },
  }];

  const gLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Geometric Difference vs RBF', font: { size: 14, color: '#e6edf3' } },
    height: 320,
    barmode: 'group',
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Geometric Difference', type: 'log' },
    legend: { orientation: 'h', y: 1.15, font: { size: 11 } },
    margin: { t: 60, r: 20, b: 50, l: 60 },
  };

  return React.createElement('div', null,
    React.createElement('div', { className: 'grid-2' },
      React.createElement('div', { className: 'card' },
        React.createElement(Plot, { data: eigenData, layout: eigenLayout })
      ),
      React.createElement('div', { className: 'card' },
        React.createElement(Plot, { data: scatterData, layout: scatterLayout })
      ),
    ),
    React.createElement('div', { className: 'card' },
      React.createElement(Plot, { data: gData, layout: gLayout }),
      React.createElement('div', { className: 'text-panel', style: { marginTop: 12 } },
        React.createElement('p', null,
          React.createElement('strong', null, 'Interpretation: '),
          'g(RBF, Q) >> g(Q, RBF) for all quantum kernels, meaning the classical RBF kernel captures significantly more predictive structure than quantum kernels on real fraud data. ',
          'This confirms that quantum advantage does not hold on this dataset \u2014 the data structure is inherently classical.'
        ),
      )
    )
  );
}

// ─── Tab 5: Quantum Advantage ───
function QuantumAdvantageTab() {
  if (!SYNTHETIC_DATA) return React.createElement('div', null, 'No synthetic data available.');

  const results = SYNTHETIC_DATA.results;
  const sorted = [...results].sort((a, b) => b.accuracy - a.accuracy);

  const barColors = sorted.map(r =>
    r.kernel === 'ZZ' ? '#3fb950' :
    ['IQP', 'Covariant', 'HW-Efficient'].includes(r.kernel) ? '#58a6ff' : '#f0883e'
  );

  const barData = [{
    x: sorted.map(r => r.kernel),
    y: sorted.map(r => r.accuracy * 100),
    type: 'bar',
    marker: { color: barColors },
    text: sorted.map(r => (r.accuracy * 100).toFixed(1) + '%'),
    textposition: 'outside',
    textfont: { color: '#e6edf3', size: 12 },
    hovertemplate: '%{x}: %{y:.1f}%<extra></extra>',
  }];

  const barLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Synthetic Benchmark: Classification Accuracy', font: { size: 14, color: '#e6edf3' } },
    height: 380,
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Accuracy (%)', range: [0, 80] },
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: '' },
    showlegend: false,
    annotations: [{
      x: 'ZZ', y: 69, xref: 'x', yref: 'y',
      text: '+17pp vs RBF',
      showarrow: true, arrowhead: 2,
      ax: 60, ay: -30,
      font: { color: '#3fb950', size: 13, family: 'monospace' },
      arrowcolor: '#3fb950',
    }],
  };

  return React.createElement('div', null,
    React.createElement('div', { className: 'grid-2' },
      React.createElement('div', { className: 'card' },
        React.createElement(Plot, { data: barData, layout: barLayout })
      ),
      React.createElement('div', { className: 'card' },
        React.createElement('h3', null, 'Synthetic Advantage Dataset'),
        React.createElement('div', { className: 'text-panel' },
          React.createElement('p', null,
            React.createElement('strong', null, 'Construction: '),
            'Labels are generated from quantum state fidelity: y\u1D62 = 1 if |\u27E8\u03C8_ref|\u03C8(x\u1D62)\u27E9|\u00B2 > median, else 0. The ZZ feature map generates \u03C8(x), so labels are determined by quantum structure that the ZZ kernel is designed to capture.'
          ),
          React.createElement('p', null,
            React.createElement('strong', null, 'Result: '),
            'The ZZ kernel (the generating kernel) achieves 69.0% accuracy vs 52.0% for RBF \u2014 a 17 percentage point gap. This proves that when the data label structure is quantum-determined, quantum kernels provide a genuine advantage that classical kernels cannot replicate.'
          ),
          React.createElement('p', null,
            React.createElement('strong', null, 'Implication: '),
            'Quantum advantage in kernel methods is real but data-dependent. On real fraud data (Phase 3), classical kernels perform comparably because the label structure is inherently classical. The value of quantum kernels lies in problems where the underlying data structure matches the quantum feature map geometry.'
          ),
        )
      ),
    ),
    React.createElement('div', { className: 'card' },
      React.createElement('h3', null, 'Full Synthetic Results'),
      React.createElement('table', { className: 'results-table' },
        React.createElement('thead', null,
          React.createElement('tr', null,
            ['Kernel', 'Accuracy', 'F1', 'AUROC', 'KTA'].map(h =>
              React.createElement('th', { key: h }, h)
            )
          )
        ),
        React.createElement('tbody', null,
          sorted.map((r, i) =>
            React.createElement('tr', {
              key: i,
              className: r.kernel === 'ZZ' ? 'highlight-row' : '',
            },
              React.createElement('td', { style: { fontWeight: 500 } },
                r.kernel, r.kernel === 'ZZ' ? ' (generating)' : ''),
              React.createElement('td', {
                style: r.kernel === 'ZZ' ? { fontWeight: 700, color: '#3fb950' } : {},
              }, (r.accuracy * 100).toFixed(1) + '%'),
              React.createElement('td', null, r.f1.toFixed(3)),
              React.createElement('td', null, r.auroc.toFixed(3)),
              React.createElement('td', null, r.kta.toFixed(4)),
            )
          )
        )
      )
    )
  );
}

// ─── Tab 6: Hardware & Noise ───
function HardwareNoiseTab() {
  if (!NOISE_DATA) return React.createElement('div', null, 'No noise data available.');

  const sweep = NOISE_DATA.noise_sweep;
  const zne = NOISE_DATA.zne;

  // Frobenius error vs noise
  const frobData = [{
    x: sweep.map(s => s.single_qubit_error),
    y: sweep.map(s => s.frobenius_error),
    type: 'scatter',
    mode: 'lines+markers',
    marker: { color: '#f85149', size: 6 },
    line: { color: '#f85149', width: 2 },
    hovertemplate: 'Error rate: %{x:.4f}<br>Frobenius: %{y:.4f}<extra></extra>',
  }];

  const frobLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Kernel Fidelity vs Noise Level', font: { size: 14, color: '#e6edf3' } },
    height: 320,
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: 'Single-Qubit Error Rate', type: 'log' },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Frobenius Error', range: [0, 1.05] },
    shapes: [{
      type: 'line',
      x0: NOISE_DATA.noise_tolerance_threshold, x1: NOISE_DATA.noise_tolerance_threshold,
      y0: 0, y1: 1,
      line: { color: '#ffa657', width: 1.5, dash: 'dot' },
    }],
    annotations: [{
      x: Math.log10(NOISE_DATA.noise_tolerance_threshold),
      y: 0.5,
      text: 'Tolerance\nthreshold',
      showarrow: false,
      font: { color: '#ffa657', size: 10 },
      xref: 'x', yref: 'y',
    }],
  };

  // Correlation vs noise
  const corrData = [{
    x: sweep.map(s => s.single_qubit_error),
    y: sweep.map(s => s.correlation),
    type: 'scatter',
    mode: 'lines+markers',
    marker: { color: '#58a6ff', size: 6 },
    line: { color: '#58a6ff', width: 2 },
    hovertemplate: 'Error rate: %{x:.4f}<br>Correlation: %{y:.4f}<extra></extra>',
  }];

  const corrLayout = {
    ...PLOTLY_LAYOUT_BASE,
    title: { text: 'Pearson Correlation vs Noise Level', font: { size: 14, color: '#e6edf3' } },
    height: 320,
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: 'Single-Qubit Error Rate', type: 'log' },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: 'Pearson r (off-diagonal)', range: [0, 1.05] },
    shapes: [{
      type: 'line',
      x0: sweep[0].single_qubit_error, x1: sweep[sweep.length-1].single_qubit_error,
      y0: 0.99, y1: 0.99,
      line: { color: '#3fb950', width: 1, dash: 'dash' },
    }],
    annotations: [{
      x: Math.log10(0.001),
      y: 0.98,
      text: 'r = 0.99',
      showarrow: false,
      font: { color: '#3fb950', size: 10 },
    }],
  };

  // ZNE comparison heatmaps — use synthetic data to show the concept
  // Ideal kernel (20x20 from ZZ)
  const idealMatrix = KERNEL_MATRICES ? KERNEL_MATRICES.kernels['HW-Efficient'].matrix : null;

  const colorscale = [
    [0, '#0d1117'], [0.05, '#161b40'], [0.1, '#1a2260'],
    [0.2, '#1f3d8a'], [0.4, '#2563b0'], [0.6, '#4c90d0'],
    [0.8, '#79c0ff'], [1, '#ffffff']
  ];

  const heatmapLayout = (title) => ({
    ...PLOTLY_LAYOUT_BASE,
    title: { text: title, font: { size: 13, color: '#e6edf3' } },
    height: 280,
    margin: { t: 40, r: 10, b: 20, l: 30 },
    xaxis: { ...PLOTLY_LAYOUT_BASE.xaxis, title: '', showticklabels: false },
    yaxis: { ...PLOTLY_LAYOUT_BASE.yaxis, title: '', autorange: 'reversed', showticklabels: false },
  });

  return React.createElement('div', null,
    React.createElement('div', { className: 'grid-2' },
      React.createElement('div', { className: 'card' },
        React.createElement(Plot, { data: frobData, layout: frobLayout })
      ),
      React.createElement('div', { className: 'card' },
        React.createElement(Plot, { data: corrData, layout: corrLayout })
      ),
    ),
    React.createElement('div', { className: 'grid-2' },
      idealMatrix ? React.createElement('div', { className: 'card' },
        React.createElement('h3', null, 'Ideal Kernel Matrix (HW-Efficient, Statevector)'),
        React.createElement(Plot, {
          data: [{
            z: idealMatrix,
            type: 'heatmap',
            colorscale: colorscale,
            zmin: 0, zmax: 1,
            showscale: true,
            colorbar: { tickfont: { color: '#8b949e', size: 10 }, len: 0.8 },
          }],
          layout: heatmapLayout('Ideal (no noise)'),
        })
      ) : null,
      React.createElement('div', { className: 'card' },
        React.createElement('h3', null, 'ZNE Error Mitigation Summary'),
        React.createElement('div', { className: 'text-panel', style: { marginBottom: 16 } },
          React.createElement('p', null,
            'Zero-Noise Extrapolation runs circuits at multiple noise scale factors [1.0, 1.5, 2.0, 2.5, 3.0] and extrapolates to the zero-noise limit.'
          ),
        ),
        React.createElement('div', { className: 'zne-summary' },
          React.createElement('div', { className: 'zne-stat' },
            React.createElement('div', { className: 'val' }, zne.improvement_pct + '%'),
            React.createElement('div', { className: 'lbl' }, 'Frobenius Error Recovery'),
          ),
          React.createElement('div', { className: 'zne-stat' },
            React.createElement('div', { className: 'val' }, '38.8%'),
            React.createElement('div', { className: 'lbl' }, 'MAE Reduction'),
          ),
          React.createElement('div', { className: 'zne-stat' },
            React.createElement('div', { className: 'val' },
              zne.noisy.frobenius_error + ' \u2192 ' + zne.corrected.frobenius_error),
            React.createElement('div', { className: 'lbl' }, 'Frobenius Error (Noisy \u2192 ZNE)'),
          ),
          React.createElement('div', { className: 'zne-stat' },
            React.createElement('div', { className: 'val' },
              zne.noisy.mae + ' \u2192 ' + zne.corrected.mae),
            React.createElement('div', { className: 'lbl' }, 'MAE (Noisy \u2192 ZNE)'),
          ),
        ),
        React.createElement('div', { className: 'text-panel', style: { marginTop: 16 } },
          React.createElement('p', null,
            React.createElement('strong', null, 'Key finding: '),
            'Quantum kernels remain useful (correlation > 0.99) up to ~0.6% single-qubit error rate, covering typical IBM hardware (',
            '~0.1\u20130.5%). Beyond ~1.3% error, kernel structure degrades significantly. At 5% error, the kernel becomes random noise (r = 0.11).'
          ),
        ),
      ),
    ),
  );
}

// ─── App ───
function App() {
  const [activeTab, setActiveTab] = useState(0);

  const tabComponents = [
    OverviewTab,
    KernelComparisonTab,
    BenchmarkTab,
    ExpressibilityTab,
    QuantumAdvantageTab,
    HardwareNoiseTab,
  ];

  const ActiveComponent = tabComponents[activeTab];

  return React.createElement('div', null,
    React.createElement('div', { className: 'app-header' },
      React.createElement('h1', null, 'Quantum Kernel Anomaly Detection'),
      React.createElement('div', { className: 'subtitle' },
        'Hybrid quantum-classical fraud detection with expressibility analysis and hardware noise characterization'
      ),
    ),
    React.createElement('div', { className: 'tab-bar' },
      TABS.map((tab, i) =>
        React.createElement('button', {
          key: i,
          className: `tab-btn ${activeTab === i ? 'active' : ''}`,
          onClick: () => setActiveTab(i),
        }, tab)
      )
    ),
    React.createElement('div', { className: 'tab-content' },
      React.createElement(ActiveComponent)
    ),
  );
}

ReactDOM.render(React.createElement(App), document.getElementById('root'));
</script>
</body>
</html>
